<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>AgriConnect Marketplace - Consumer Dashboard</title>
    <style>
        :root {
            --primary: #1e2a38;
            --accent: #00796b;
            --soft: #f5f7fa;
            --surface: #fff;
            --navbg: #e9edf3;
            --border: #e3e8ef;
            --radius: 12px;
            --transition: 0.2s cubic-bezier(.4, 0, .2, 1);
            --success: #4caf50;
            --pending: #fbc02d;
            --info: #2196f3;
            --danger: #f44336;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            background: var(--soft);
            color: #29313a;
            transition: background var(--transition), color var(--transition);
        }

        /* Top Bar */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--primary);
            color: #fff;
            padding: 14px 32px;
            box-shadow: 0 2px 12px rgba(0, 0, 0, .07);
            position: sticky;
            top: 0;
            z-index: 90;
        }

        .site-title {
            font-size: 1.3em;
            font-weight: 600;
            letter-spacing: 0.05em;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 18px;
        }

        .avatar {
            width: 38px;
            height: 38px;
            border-radius: 50%;
            background: #b0e0f5;
            color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2em;
            font-weight: 700;
            border: 2px solid #e3e8ef;
            box-shadow: 0 1px 6px rgba(0, 0, 0, 0.11);
        }

        .user-details {
            display: flex;
            flex-direction: column;
        }

        .user-name {
            font-weight: 600;
        }

        .user-role {
            font-size: 0.93em;
            color: #d1e1e1;
        }

        .header-actions {
            display: flex;
            gap: 12px;
        }

        .header-actions button {
            background: rgba(255, 255, 255, 0.14);
            color: #fff;
            border: none;
            border-radius: 8px;
            padding: 8px 16px;
            cursor: pointer;
            font-weight: 500;
            transition: background var(--transition);
        }

        .header-actions button:hover {
            background: rgba(255, 255, 255, 0.34);
        }

        /* Nav Tabs */
        .dashboard-tabs {
            display: flex;
            justify-content: center;
            gap: 20px;
            background: var(--navbg);
            padding: 16px 0;
        }

        .dashboard-tabs button {
            background: none;
            padding: 10px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            color: var(--primary);
            font-size: 1.05em;
            transition: color var(--transition), background var(--transition), transform var(--transition);
        }

        .dashboard-tabs button.active {
            background: var(--primary);
            color: #fff;
            transform: scale(1.05);
            box-shadow: 0 1px 6px rgba(30, 42, 56, 0.1);
        }

        .dashboard-tabs button:not(.active):hover {
            background: rgba(30, 42, 56, 0.12);
            color: var(--accent);
        }

        /* Main Section Layout */
        main {
            max-width: 1100px;
            margin: 30px auto;
            padding: 0 2vw;
            display: block;
            min-height: 450px;
        }

        section {
            display: none;
        }

        section.active {
            display: block;
        }

        /* Section Cards */
        .card {
            background: var(--surface);
            border-radius: var(--radius);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.04);
            margin-bottom: 30px;
            padding: 25px;
        }

        /* Profile */
        .profile-main {
            display: flex;
            gap: 32px;
            flex-wrap: wrap;
            justify-content: space-between;
            align-items: flex-start;
        }

        .profile-info {
            flex: 1;
            min-width: 260px;
        }

        .profile-header {
            display: flex;
            align-items: center;
            gap: 18px;
            margin-bottom: 18px;
        }

        .profile-details .info {
            margin: 6px 0;
            font-size: 1em;
            display: flex;
            align-items: center;
            gap: 9px;
        }

        .tag {
            display: inline-block;
            background: #e7f3ee;
            color: #20796b;
            padding: 2px 10px;
            border-radius: 8px;
            font-size: 0.95em;
            margin-right: 6px;
        }

        .btn {
            background: var(--primary);
            color: #fff;
            border: none;
            padding: 9px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
        }

        .btn:hover {
            background: var(--accent);
        }

        /* Preferences */
        .prefs {
            flex: 1;
            min-width: 220px;
        }

        .prefs-label {
            font-weight: 500;
            margin-top: 8px;
            color: var(--primary);
        }

        .prefs-cat {
            display: inline-block;
            background: #d2e6ef;
            color: #2176af;
            border-radius: 9px;
            padding: 3px 10px;
            font-size: 0.97em;
            margin: 3px;
        }

        .prefs .btn {
            background: #eee;
            color: var(--primary);
            margin-top: 12px;
        }

        /* Order History */
        .order-list {
            list-style: none;
            padding: 0;
        }

        .order-item {
            display: flex;
            align-items: center;
            gap: 18px;
            background: #f6fafd;
            padding: 14px 20px;
            border-radius: 10px;
            margin-bottom: 10px;
        }

        .farm-img {
            width: 62px;
            height: 62px;
            border-radius: 10px;
            object-fit: cover;
        }

        .order-info {
            flex: 1;
        }

        .farm-title {
            font-size: 1.08em;
            font-weight: 600;
        }

        .farm-desc {
            font-size: 0.98em;
            color: #6b7280;
        }

        .order-date {
            font-size: 0.87em;
            color: #aaa;
        }

        .order-status {
            font-weight: 600;
            font-size: 0.93em;
            padding: 5px 14px;
            border-radius: 9px;
            margin-right: 12px;
        }

        .delivered {
            background: var(--success);
            color: #fff;
        }

        .shipping {
            background: var(--info);
            color: #fff;
        }

        .pending {
            background: var(--pending);
            color: #fff;
        }

        .order-actions button {
            background: var(--primary);
            color: #fff;
            border: none;
            padding: 7px 12px;
            border-radius: 8px;
            margin-left: 10px;
            cursor: pointer;
        }

        .order-actions button:hover {
            background: var(--accent);
        }

        /* Farmers List */
        .farmers-grid {
            display: flex;
            gap: 22px;
            flex-wrap: wrap;
        }

        .farm-card {
            background: #f6fafd;
            border-radius: 13px;
            box-shadow: 0 1px 6px rgba(0, 0, 0, 0.06);
            padding: 18px 18px 20px;
            width: 290px;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }

        .farm-card img {
            width: 100%;
            height: 108px;
            object-fit: cover;
            border-radius: 10px;
            margin-bottom: 14px;
        }

        .farm-title {
            font-weight: 600;
            margin: 0 0 6px 0;
        }

        .farm-location {
            font-size: 0.98em;
            color: #6b7280;
        }

        .farm-rating {
            font-weight: 500;
            color: #e9b500;
            font-size: 1em;
        }

        .farm-tags {
            display: flex;
            gap: 6px;
            margin-top: 6px;
        }

        .farm-tag {
            background: #dde8db;
            color: #20796b;
            padding: 2px 9px 2px 9px;
            border-radius: 6px;
            font-size: 0.95em;
        }

        .farm-orders {
            margin-top: 7px;
            font-size: 0.94em;
            color: #444;
        }

        .farm-card .btn {
            background: var(--primary);
            margin-top: 14px;
        }

        .farm-card .btn:hover {
            background: var(--accent);
        }

        /* Stats Cards */
        .stats-trio {
            display: flex;
            gap: 22px;
            flex-wrap: wrap;
            margin-bottom: 38px;
        }

        .stat-item {
            flex: 1;
            background: #f6fafd;
            border-radius: 12px;
            padding: 22px 14px;
            text-align: center;
            box-shadow: 0 1px 7px rgba(0, 0, 0, 0.05);
        }

        .stat-title {
            color: #556080;
            font-size: 0.96em;
        }

        .stat-value {
            font-size: 1.4em;
            font-weight: 700;
            margin-top: 5px;
        }

        .stat-desc {
            color: #90a0b2;
            font-size: 0.94em;
        }

        /* Toggle, Logout, Tooltips */
        .toggle-switch {
            margin-right: 16px;
            cursor: pointer;
            padding: 6px 13px;
            border-radius: 8px;
            background: #eee;
            color: var(--primary);
            font-weight: 500;
        }

        .toggle-switch.active {
            background: #333;
            color: #fff;
        }

        .logout-btn {
            background: #f44336;
            color: #fff;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            margin-left: 10px;
            cursor: pointer;
        }

        /* Responsive */
        @media (max-width:850px) {
            main {
                padding: 3vw;
            }

            .profile-main,
            .farmers-grid,
            .stats-trio {
                flex-direction: column;
                gap: 18px;
            }

            .farm-card,
            .stat-item {
                width: 100% !important;
                max-width: 100%;
            }
        }
    </style>
</head>

<body>
    <header>
        <div class="site-title">Consumer Dashboard</div>
        <div class="user-info">
            <div class="avatar">S</div>
            <div class="user-details">
                <div class="nav-user">
                    Welcome, <span id="navUserName">User</span>
                </div>

                <div class="user-role">Consumer</div>
            </div>
            <div class="header-actions">
                <button id="toggleDark">🌙</button>
                <button class="logout-btn" id="logoutBtn">Logout</button>
            </div>
        </div>
    </header>
    <nav class="dashboard-tabs">
        <button class="active" onclick="showTab('overview',this)">Overview</button>
        <button onclick="showTab('profile',this)">Profile</button>
        <button onclick="showTab('orders',this)">Orders</button>
        <button onclick="showTab('farmers',this)">Farmers</button>
        <button onclick= "window.location.href='buyers.html'">Buy</button>
    </nav>
    <main>
        <!-- OVERVIEW -->
        <section id="overview" class="active">
            <div class="stats-trio">
                <div class="stat-item">
                    <div class="stat-title">Total Orders</div>
                    <div class="stat-value">35 <span style="font-size:0.7em;color:#86b25f;">+4 this month</span></div>
                    <div class="stat-desc"></div>
                </div>
                <div class="stat-item">
                    <div class="stat-title">Total Spent</div>
                    <div class="stat-value">$892 <span style="font-size:0.7em;color:#2ea97d;">+124 this month</span>
                    </div>
                </div>
                <div class="stat-item">
                    <div class="stat-title">Favorite Stores</div>
                    <div class="stat-value">7</div>
                    <div class="stat-desc">Active favorites</div>
                </div>
            </div>
            <div class="card">
                <h3 style="margin-bottom:16px;">Recent Orders</h3>
                <ul class="order-list">
                    <li class="order-item">
                        <img src="tomotoes.jpg"
                            class="farm-img" alt="Green Valley Farm" />
                        <div class="order-info">
                            <div class="farm-title">Green Valley Farm</div>
                            <div class="farm-desc">Organic Tomatoes, Fresh Lettuce</div>
                        </div>
                        <div class="order-status delivered">Delivered</div>
                        <div class="order-date">$18.00</div>
                    </li>
                    <li class="order-item">
                        <img src="oranges.jpg"
                            class="farm-img" alt="Sunny Orchards" />
                        <div class="order-info">
                            <div class="farm-title">Sunny Orchards</div>
                            <div class="farm-desc">Organic Apples, Fresh Oranges</div>
                        </div>
                        <div class="order-status shipping">Shipping</div>
                        <div class="order-date">$24.50</div>
                    </li>
                    <li class="order-item">
                        <img src="milk.jpg"
                            class="farm-img" alt="Meadow Brook Dairy" />
                        <div class="order-info">
                            <div class="farm-title">Meadow Brook Dairy</div>
                            <div class="farm-desc">Fresh Milk, Organic Cheese</div>
                        </div>
                        <div class="order-status pending">Pending</div>
                        <div class="order-date">$16.75</div>
                    </li>
                </ul>
            </div>
        </section>
        <!-- PROFILE -->
        <section id="profile">
            <h2>Profile</h2>
            <img id="profileImage" src="default.png" alt="Profile Image" style="width:100px; border-radius:50%">
            <p><strong>Name:</strong> <span id="profileName">Not set</span></p>
            <p><strong>Role:</strong> <span id="profileRole">Not set</span></p>
            <p><strong>Location:</strong> <span id="profileLocation">Not set</span></p>
            <p><strong>Summary:</strong> <span id="profileSummary">Not set</span></p>
            <p><strong>Products:</strong> <span id="profileProducts">Not set</span></p>
            <p><strong>Community/FPO:</strong> <span id="profileFpo">Not set</span></p>
            <p><strong>Certifications:</strong> <span id="profileCert">Not set</span></p>
            <p><strong>Preferred Payment:</strong> <span id="profilePayment">Not set</span></p>
            <p><strong>Languages:</strong> <span id="profileLanguages">Not set</span></p>
            <p><strong>Contact:</strong> <span id="profileContact">Not set</span></p>
            <button class="btn" onclick="window.location.href='profile.html'">
                Edit Profile
            </button>
            </div>
            <div class="prefs">
                <div style="font-size:1.08em;font-weight:600;color:var(--primary);margin-bottom:10px;">
                    Preferences</div>
                <div class="prefs-label">Dietary Preferences:</div>
                <div class="prefs-label">Dietary Preferences:</div>
                <div id="dietaryPrefs">None</div>

                <div class="prefs-label" style="margin-top:10px;">Favorite Categories:</div>
                <div id="categoryPrefs">None</div>

                <div class="prefs-label" style="margin-top:10px;">Delivery Preferences:</div>
                <div id="deliveryPrefs">None</div>

                <button class="btn" style="margin-top:16px;background:#e2eaf7;color:var(--primary);"
                    onclick="window.location.href='preferences.html'">
                    Update Preferences
                </button>

            </div>
            </div>
            </div>
        </section>
        <!-- ORDERS -->
        <section id="orders">
            <div class="card">
                <h3 style="margin-bottom:18px;">Order History</h3>
                <ul class="order-list">
                    <li class="order-item">
                        <img src="tomotoes.jpg"
                            class="farm-img" alt="Green Valley Farm" />
                        <div class="order-info">
                            <div class="farm-title">Green Valley Farm</div>
                            <div class="farm-desc">Organic Tomatoes, Fresh Lettuce</div>
                            <div class="order-date">2025-01-08</div>
                        </div>
                        <div class="order-status delivered">Delivered</div>
                        <div class="order-actions">
                            <button>Track Order</button>
                            <button>Reorder</button>
                        </div>
                        <div class="order-date">$18.00</div>
                    </li>
                    <li class="order-item">
                        <img src="oranges.jpg"
                            class="farm-img" alt="Sunny Orchards" />
                        <div class="order-info">
                            <div class="farm-title">Sunny Orchards</div>
                            <div class="farm-desc">Organic Apples, Fresh Oranges</div>
                            <div class="order-date">2025-01-09</div>
                        </div>
                        <div class="order-status shipping">Shipping</div>
                        <div class="order-actions">
                            <button>Track Order</button>
                            <button>Reorder</button>
                        </div>
                        <div class="order-date">$24.50</div>
                    </li>
                    <li class="order-item">
                        <img src="milk.jpg"
                            class="farm-img" alt="Meadow Brook Dairy" />
                        <div class="order-info">
                            <div class="farm-title">Meadow Brook Dairy</div>
                            <div class="farm-desc">Fresh Milk, Organic Cheese</div>
                            <div class="order-date">2025-01-10</div>
                        </div>
                        <div class="order-status pending">Pending</div>
                        <div class="order-actions">
                            <button>Track Order</button>
                            <button>Reorder</button>
                        </div>
                        <div class="order-date">$16.75</div>
                    </li>
                </ul>
            </div>
        </section>
        <!-- FARMERS -->
        <section id="farmers">
            <div class="card">
                <h3 style="margin-bottom:18px;">Your Farmers</h3>
                <div class="farmers-grid">
                    <div class="farm-card">
                        <img src="tomotoes.jpg"
                            alt="Green Valley Farm">
                        <div class="farm-title">Green Valley Farm</div>
                        <div class="farm-location">California</div>
                        <div class="farm-rating">★ 4.8</div>
                        <div class="farm-tags">
                            <span class="farm-tag">Vegetables</span>
                            <span class="farm-tag">Herbs</span>
                        </div>
                        <div class="farm-orders">12 orders placed</div>
                        <button class="btn">Visit Farm</button>
                    </div>
                    <div class="farm-card">
                        <img src="oranges.jpg"
                            alt="Sunny Orchards">
                        <div class="farm-title">Sunny Orchards</div>
                        <div class="farm-location">Florida</div>
                        <div class="farm-rating">★ 4.9</div>
                        <div class="farm-tags">
                            <span class="farm-tag">Fruits</span>
                            <span class="farm-tag">Citrus</span>
                        </div>
                        <div class="farm-orders">8 orders placed</div>
                        <button class="btn">Visit Farm</button>
                    </div>
                    <div class="farm-card">
                        <img src="milk.jpg"
                            alt="Meadow Brook Dairy">
                        <div class="farm-title">Meadow Brook Dairy</div>
                        <div class="farm-location">Wisconsin</div>
                        <div class="farm-rating">★ 4.7</div>
                        <div class="farm-tags">
                            <span class="farm-tag">Dairy</span>
                            <span class="farm-tag">Cheese</span>
                        </div>
                        <div class="farm-orders">15 orders placed</div>
                        <button class="btn">Visit Farm</button>
                    </div>
                </div>
            </div>
        </section>
    </main>
    <script>

        // Load username into navigation bar
        window.addEventListener('DOMContentLoaded', () => {
            const storedName = localStorage.getItem('loggedInUser');
            const displayName = storedName && storedName.trim() ? storedName : 'Guest';
            const nameSpan = document.getElementById('navUserName');

            if (nameSpan) {
                nameSpan.textContent = displayName;
            } else {
                console.warn('⚠️ navUserName element not found in DOM.');
            }
        });


        

        function logout() {
            localStorage.removeItem('loggedInUser');
            window.location.href = 'login.html';
        }


        function showTab(id, btn) {
            document.querySelectorAll('nav.dashboard-tabs button').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            document.querySelectorAll('main > section').forEach(sec => sec.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }
        document.getElementById('toggleDark').onclick = function () {
            document.body.classList.toggle('dark-mode');
            document.body.style.background = document.body.classList.contains('dark-mode') ? '#10192e' : '';
            document.body.style.color = document.body.classList.contains('dark-mode') ? '#e5e7eb' : '';
            document.querySelector('header').style.background = document.body.classList.contains('dark-mode') ? '#0f172a' : '';
            document.querySelectorAll('.card,.farm-card,.stat-item').forEach(el => {
                el.style.background = document.body.classList.contains('dark-mode') ? '#1e293b' : '';
                el.style.color = document.body.classList.contains('dark-mode') ? '#e5e7eb' : '';
            });
            document.querySelectorAll('.order-item').forEach(el => {
                el.style.background = document.body.classList.contains('dark-mode') ? '#293356' : '';
            });


        }
        document.getElementById('logoutBtn').onclick = () => {
            alert('Logged out successfully!');
            window.location.href = 'login.html';
        };

        function loadPreferences() {
            const saved = JSON.parse(localStorage.getItem('userPreferences') || '{}');

            // Update Dietary Preferences
            document.getElementById('dietaryPrefs').innerHTML =
                saved.diets && saved.diets.length
                    ? saved.diets.map(p => `<span class="prefs-cat">${p}</span>`).join(' ')
                    : 'None';

            // Update Favorite Categories
            document.getElementById('categoryPrefs').innerHTML =
                saved.categories && saved.categories.length
                    ? saved.categories.map(p => `<span class="prefs-cat">${p}</span>`).join(' ')
                    : 'None';

            // Update Delivery Preferences
            document.getElementById('deliveryPrefs').textContent =
                saved.delivery || 'None';
        }

        // Load preferences on page load
        window.addEventListener('DOMContentLoaded', loadPreferences);

        // Reload preferences when Profile tab is opened
        window.addEventListener('hashchange', () => {
            if (location.hash === '#profile') loadPreferences();
        });

    </script>
</body>

</html>